<div fxLayout="column">
  <mat-error *ngIf="error">
    {{error}}
  </mat-error>

  <mat-card *ngFor="let meeting of meetings" class="mat-elevation-z4">
    <mat-card-header>
      <mat-card-title>
        {{meeting.date | date}}
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-card *ngIf="meeting.physicalAddress">
        <mat-card-header fxLayout="row">
          <mat-card-title>
            <mat-icon>place</mat-icon>
            Lieu du rendez-vous
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <a mat-flat-button [href]="'https://maps.google.com/?q=' + meeting.physicalAddress" target="_blank">
            {{meeting.physicalAddress}}
            <mat-icon>open_in_new</mat-icon>
          </a>
        </mat-card-content>
      </mat-card>

      <mat-card>
        <mat-card-header>
          <mat-card-title>
            <mat-icon>video_call</mat-icon>
            Salle virtuelle
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <ng-container *ngIf="meeting.jitsiMeetToken; else noMeetingForNow">
            <a mat-button color="primary" [routerLink]="['/admin/meeting', meeting.id]">
              Rejoindre la salle virtuelle
              <mat-icon>featured_video</mat-icon>
            </a>
          </ng-container>
          <ng-template #noMeetingForNow>
            Aucune salle virtuelle. Un formateur en créera une le moment venu.
          </ng-template>
        </mat-card-content>
      </mat-card>

      <mat-card *appIfHasRole="[appRoles.Admin, appRoles.Formator]">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>security</mat-icon>
            actions d'administration
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <ng-container>
            <p>
              <ng-container *ngIf="meeting.virtualAddress; else createVirtualAddress">
                Une salle virtuelle est déjà disponible.
                <a mat-button>
                  la recréer?
                </a>
              </ng-container>
              <ng-template #createVirtualAddress>
                <a mat-button color="primary">
                  Créer une salle virtuelle.
                </a>
              </ng-template>
            </p>
          </ng-container>
        </mat-card-content>
      </mat-card>
    </mat-card-content>
  </mat-card>

  <app-create-meeting-tile [evenementId]="evenementId">
  </app-create-meeting-tile>

</div>